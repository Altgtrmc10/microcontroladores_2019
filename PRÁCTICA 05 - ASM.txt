; PRÁCTICA 5
; ALITZEL GALILEA TORRES MACÍAS

	LIST 	P=16F887	; MICROCONTROLADOR A PROGRAMAR
	INCLUDE	"P16F887.INC"	; CARGA LA LIBRERÍA DEL MICROCONTROLADOR
	
R0 	EQU 	0x20
R1 	EQU 	0x21
R2 	EQU 	0x22

	ORG 	0x00		; INICIO DE LA PRIMERA INSTRUCCIÓN
	GOTO 	INICIO		; VA A LA ETIQUETA "INICIO"

INICIO	BSF 	STATUS, RP0	; PONE EN 1 A RP0 PARA BANCO 3
	BSF 	STATUS, RP1	; PONE EN 1 A RP1 PARA BANCO 3
	CLRF 	TRISB		; PONE EN 0 A TRISB, DECLARA PUERTO B COMO SALIDA
	CLRF 	ANSEL		; PONE EN 0 A ANSEL
	CLRF 	ANSELH		; PONE EN 0 A ANSELH
	BCF 	STATUS, RP0	; PONE EN 0 A RP0 PARA BANCO 0
	BCF	STATUS, RP1	; PONE EN 0 A RP1 PARA BANCO 0
	CLRF	PORTB		; 

BUCLE	BTFSC	PORTA, 0	; COMPRUEBA SI EL BIT 0 DEL PUERTO A ESTÁ EN 1
	GOTO	JOHNSON		; VA A LA ETIQUETA "JOHNSON"
	GOTO	ANILLO		; VA A LA ETIQUETA "ANILLO"
	
ANILLO	MOVLW 	0x01
	MOVWF 	PORTB
	CALL 	RETARDO	
HALO	RLF 	PORTB, 1
	CALL 	RETARDO
	BTFSS 	PORTB, 7
	GOTO 	HALO
	GOTO 	BUCLE

JOHNSON RLF 	PORTB, 1
	MOVLW 	0x01
	ADDWF 	PORTB, 1
	CALL 	RETARDO
	BTFSS 	PORTB, 7
	GOTO 	JOHNSON
REGRESO	RLF 	PORTB, 1
	BCF 	STATUS, 0
	CALL 	RETARDO
	BTFSC 	PORTB, 7
	GOTO 	REGRESO
	GOTO 	BUCLE
	
RETARDO	MOVLW 	.100
	MOVWF 	R0
	MOVLW 	.50
	MOVWF 	R1
	MOVLW 	.3
	MOVWF 	R2

CUENTA	DECFSZ 	R0
	GOTO 	CUENTA
	DECFSZ 	R1
	GOTO 	CUENTA
	DECFSZ 	R2
	GOTO 	CUENTA
	RETURN

	END			; FIN DEL PROGRAMA